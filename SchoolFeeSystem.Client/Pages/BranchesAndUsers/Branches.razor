@page "/branches"
@inject IBranch Branch
@inject ISnackbar Snackbar
<MudForm @ref="branch" Model="model">
    <MudGrid>
        <MudItem>
            <MudLocalizedTextField @bind-Value="model.Name" Label="څانګي نوم" Required RequiredError="څانګي نوم حتمي دی" />
        </MudItem>
        <MudItem>
            <MudLocalizedTextField @bind-Value="model.Address" Label="ادرس" />
        </MudItem>
        <MudItem>
            <MudButton Class="bahij-nassim-regular" Disabled="_processing" Color="Color.Primary" Variant="Variant.Filled" OnClick="OnSubmitForm">
                @if (_processing)
                {
                    <MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true" />
                    <MudText Class="ms-2">ثبت</MudText>
                }
                else
                {
                    <MudText>ثبت</MudText>
                }
            </MudButton>
        </MudItem>
    </MudGrid>
</MudForm>
<MudTable Items="branches" Dense Hover Loading="_loading">
    <HeaderContent>
        <MudTh>شمېره</MudTh>
        <MudTh>څانګي نوم</MudTh>
        <MudTh>ادرس</MudTh>
        <MudTh>عملیه</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="شمېره">@context.Id</MudTd>
        <MudTd DataLabel="څانګي نوم">@context.Name</MudTd>
        <MudTd DataLabel="ادرس">@context.Address</MudTd>
        <MudTd DataLabel="عملیه">
            <MudButton Class="bahij-nassim-regular" Color="Color.Primary" Variant="Variant.Filled" OnClick="@(() => GetStudent(context.Id))">تغیرول</MudButton>
        </MudTd>
    </RowTemplate>
</MudTable>